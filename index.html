<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#0d0f14">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Houston's ATL Tracker</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0d0f14;--s1:#1a1d25;--s2:#16181f;
  --border:#ffffff10;--border2:#ffffff08;
  --text:#e8e4dc;--dim:#888;--dim2:#666;--dim3:#555;
  --gold:#b8956a;--gold-light:#dfc08a;--gold-bg:#b8956a25;--gold-border:#b8956a33;--gold-glow:#b8956a15;
  --green:#5ec98b;--green-dark:#2d8a5e;--green-bg:#2d8a5e1a;--green-border:#2d8a5e33;
  --red:#ff6347;--red-bg:#ff634718;
  --radius:14px;--radius-sm:10px;
}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;-webkit-font-smoothing:antialiased;overflow-x:hidden}
a{color:var(--gold);text-decoration:none}
a:hover{text-decoration:underline}

/* Header */
.header{text-align:center;padding:48px 24px 32px;position:relative}
.header-eyebrow{font-size:11px;letter-spacing:3px;text-transform:uppercase;color:var(--gold);font-weight:700;margin-bottom:8px}
.header h1{font-size:28px;font-weight:700}
.header h1 span{font-weight:300}
.header-sub{color:var(--dim);font-size:14px;margin-top:6px}

/* Auth corner */
.auth-corner{position:fixed;top:16px;right:16px;z-index:100}
.btn-auth{
  background:var(--s1);border:1px solid var(--border);border-radius:10px;
  padding:8px 16px;color:var(--dim);font-size:13px;font-weight:500;cursor:pointer;
  font-family:inherit;transition:all .2s;
}
.btn-auth:hover,.btn-auth.logged-in{border-color:var(--gold-border);color:var(--gold-light)}
.auth-dropdown{
  position:absolute;top:calc(100% + 8px);right:0;width:280px;
  background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);
  padding:20px;box-shadow:0 8px 32px rgba(0,0,0,.5);display:none;
}
.auth-dropdown.open{display:block}
.auth-dropdown h3{font-size:15px;margin-bottom:12px}
.auth-dropdown input{
  width:100%;padding:10px 12px;background:var(--bg);border:1px solid var(--border);
  border-radius:8px;color:var(--text);font-family:inherit;font-size:13px;
  margin-bottom:8px;outline:none;
}
.auth-dropdown input:focus{border-color:var(--gold-border)}
.auth-dropdown .auth-btn{
  width:100%;padding:10px;border:none;border-radius:8px;
  background:linear-gradient(135deg,var(--gold),#9a7a52);color:var(--bg);
  font-weight:600;font-size:14px;cursor:pointer;margin-top:4px;
}
.auth-toggle{font-size:12px;color:var(--dim);text-align:center;margin-top:10px;cursor:pointer}
.auth-toggle strong{color:var(--gold)}
.auth-error{color:var(--red);font-size:12px;display:none;margin-top:6px}
.auth-user-view{display:none}
.auth-user-name{font-weight:600;font-size:15px}
.auth-user-email{font-size:12px;color:var(--dim);margin-bottom:12px}
.auth-logout{
  width:100%;padding:8px;border:1px solid var(--border);border-radius:8px;
  background:none;color:var(--dim);font-size:13px;cursor:pointer;font-family:inherit;
}
.user-alerts-list{margin-top:12px}
.user-alert-item{font-size:12px;padding:8px;background:var(--bg);border-radius:6px;margin-bottom:4px}

/* Hero */
.hero{
  max-width:560px;margin:0 auto 32px;
  background:linear-gradient(135deg,var(--s1),var(--s2));
  border:1px solid var(--gold-border);border-radius:16px;padding:32px;text-align:center;
  position:relative;overflow:hidden;
}
.hero::before{
  content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;
  background:radial-gradient(circle at 50% 50%,#b8956a08,transparent 60%);pointer-events:none;
}
.hero-eyebrow{font-size:11px;letter-spacing:2px;text-transform:uppercase;color:var(--dim);margin-bottom:8px;position:relative}
.hero-time{font-size:36px;font-weight:700;color:var(--gold-light);margin-bottom:4px;position:relative}
.hero-detail{font-size:15px;color:#aaa;margin-bottom:20px;position:relative}
.hero-btn{
  display:inline-block;background:linear-gradient(135deg,var(--gold),#9a7a52);
  color:var(--bg);padding:14px 36px;border-radius:10px;font-weight:600;
  font-size:15px;cursor:pointer;border:none;position:relative;transition:filter .2s;
  font-family:inherit;
}
.hero-btn:hover{filter:brightness(1.1)}
.hero-alt{margin-top:14px;font-size:13px;color:var(--dim2);position:relative}
.hero-alt a{color:var(--gold);text-decoration:none;cursor:pointer}
.hero-loading{color:var(--dim);font-size:14px;position:relative}

/* Scan bar */
.scan-bar{max-width:560px;margin:0 auto 24px;padding:0 24px;display:flex;justify-content:space-between;align-items:center}
.scan-label{font-size:12px;color:var(--dim3)}
.scan-dot{display:inline-block;width:6px;height:6px;border-radius:50%;background:var(--green);margin-right:6px;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

/* Controls */
.controls{max-width:560px;margin:0 auto;padding:0 24px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px;margin-bottom:20px}
.party-sel{display:flex;gap:6px}
.party-btn{
  background:var(--s1);border:1px solid var(--border);color:var(--dim);
  width:40px;height:40px;border-radius:8px;font-size:14px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;transition:all .2s;font-family:inherit;
}
.party-btn.active{border-color:var(--gold);color:var(--gold-light);background:var(--gold-glow)}
.loc-legend{display:flex;gap:14px}
.loc-dot{display:flex;align-items:center;gap:5px;font-size:13px;color:var(--dim)}
.loc-dot .dot{width:8px;height:8px;border-radius:50%}
.dot.pt-dot{background:var(--gold-light)}
.dot.wp-dot{background:var(--green)}

/* Week tabs */
.week-tabs{max-width:560px;margin:0 auto 16px;padding:0 24px;display:flex;gap:6px}
.week-tab{
  flex:1;padding:10px 0;border-radius:10px;font-size:13px;font-weight:600;
  text-align:center;cursor:pointer;transition:all .25s;font-family:inherit;
  background:var(--s1);border:1px solid var(--border);color:var(--dim);
}
.week-tab:hover{border-color:var(--gold-border);color:var(--gold-light)}
.week-tab.active{background:var(--gold-glow);border-color:var(--gold);color:var(--gold-light)}

/* Cards container */
.cards{max-width:560px;margin:0 auto;padding:0 24px 48px;display:flex;flex-direction:column;gap:12px;transition:opacity .25s}

/* Day card */
.day-card{
  background:linear-gradient(135deg,var(--s1),var(--s2));
  border:1px solid var(--border2);border-radius:var(--radius);padding:20px 22px;
  transition:all .2s;
}
.day-card:hover{border-color:var(--gold-border)}
.day-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.day-name{font-size:18px;font-weight:600}
.day-date{color:var(--dim2);font-size:14px;font-weight:400;margin-left:6px}
.day-badge{
  background:var(--gold-glow);color:var(--gold);padding:4px 12px;border-radius:20px;
  font-size:12px;font-weight:600;white-space:nowrap;
}
.day-badge.hot{background:var(--red-bg);color:var(--red)}
.day-badge.sold-out{background:#ff634712;color:#ff634788}

.time-section{margin-bottom:10px}
.time-section:last-child{margin-bottom:0}
.time-label{font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--dim2);margin-bottom:6px}
.time-pills{display:flex;flex-wrap:wrap;gap:6px}
.pill{
  padding:6px 13px;border-radius:8px;font-size:13px;font-weight:500;
  cursor:pointer;transition:all .15s;border:1px solid transparent;
}
.pill:hover{transform:scale(1.05);filter:brightness(1.2)}
.pill.pt{background:var(--gold-bg);color:var(--gold-light);border-color:var(--gold-border)}
.pill.wp{background:var(--green-bg);color:var(--green);border-color:var(--green-border)}

.no-slots{color:var(--dim3);font-size:13px;font-style:italic;text-align:center;margin-top:4px}

/* Alerts */
.alerts-section{max-width:560px;margin:0 auto;padding:0 24px 48px}
.alerts-card{
  background:linear-gradient(135deg,var(--s1),var(--s2));
  border:1px solid var(--border2);border-radius:var(--radius);padding:28px;
}
.alerts-title{font-size:18px;font-weight:600;margin-bottom:4px}
.alerts-sub{font-size:14px;color:var(--dim);margin-bottom:20px}
.alert-form{display:flex;flex-direction:column;gap:12px}
.alert-row{display:flex;gap:12px}
.alert-row>*{flex:1}
.alert-input{
  background:var(--bg);border:1px solid var(--border);color:var(--text);
  padding:12px 14px;border-radius:8px;font-size:14px;outline:none;
  transition:border-color .2s;font-family:inherit;width:100%;
}
.alert-input:focus{border-color:var(--gold-border)}
.alert-input::placeholder{color:var(--dim3)}
select.alert-input{appearance:none;cursor:pointer}
.alert-btn{
  background:linear-gradient(135deg,var(--gold),#9a7a52);
  color:var(--bg);padding:14px;border-radius:10px;font-weight:600;
  font-size:15px;cursor:pointer;border:none;transition:filter .2s;font-family:inherit;
}
.alert-btn:hover{filter:brightness(1.1)}
.alert-btn:disabled{opacity:.5;cursor:not-allowed}
.alert-success{display:none;text-align:center;padding:20px}
.alert-success .check{font-size:2.5rem;margin-bottom:8px}
.alert-count{text-align:center;margin-top:12px;font-size:13px;color:var(--dim)}
.alert-count strong{color:var(--gold)}

/* Booking Modal */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:200;
  display:none;align-items:center;justify-content:center;padding:24px;
}
.modal-overlay.open{display:flex}
.modal-content{
  background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);
  padding:28px;max-width:440px;width:100%;max-height:90vh;overflow-y:auto;
}
.modal-header{margin-bottom:20px}
.modal-header h3{font-size:18px;font-weight:700;margin-bottom:4px}
.modal-header .modal-loc{color:var(--gold-light);font-size:15px}
.modal-header .modal-datetime{color:var(--dim);font-size:14px}
.modal-header .modal-party{color:var(--dim);font-size:13px;margin-top:2px}
.modal-form{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.modal-form label{
  display:block;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;
  color:var(--dim);font-weight:700;margin-bottom:4px;
}
.modal-form input{
  width:100%;padding:10px 12px;background:var(--bg);border:1px solid var(--border);
  border-radius:8px;color:var(--text);font-family:inherit;font-size:14px;outline:none;
}
.modal-form input:focus{border-color:var(--gold-border)}
.modal-error{color:var(--red);font-size:12px;display:none;margin-top:10px;grid-column:1/-1}
.modal-success{display:none;text-align:center;padding:20px;grid-column:1/-1}
.modal-success .check{font-size:2.5rem;margin-bottom:8px}
.modal-success h3{color:var(--green);margin-bottom:4px}
.modal-success p{color:var(--dim);font-size:13px}
.modal-actions{display:flex;gap:10px;margin-top:16px;grid-column:1/-1}
.modal-cancel{
  flex:1;padding:12px;border:1px solid var(--border);border-radius:8px;
  background:none;color:var(--dim);font-size:14px;cursor:pointer;font-family:inherit;
}
.modal-submit{
  flex:2;padding:12px;border:none;border-radius:8px;
  background:linear-gradient(135deg,var(--gold),#9a7a52);color:var(--bg);
  font-weight:600;font-size:14px;cursor:pointer;font-family:inherit;
}
.modal-submit:disabled{opacity:.5;cursor:not-allowed}

/* Feedback floating button */
.feedback-fab{
  position:fixed;bottom:24px;right:24px;z-index:90;
  background:linear-gradient(135deg,var(--s1),var(--s2));border:1px solid var(--border);
  border-radius:50px;padding:12px 20px;color:var(--dim);font-size:13px;font-weight:500;
  cursor:pointer;font-family:inherit;transition:all .2s;display:flex;align-items:center;gap:6px;
  box-shadow:0 4px 16px rgba(0,0,0,.4);
}
.feedback-fab:hover{border-color:var(--gold-border);color:var(--gold-light)}

/* Feedback modal */
.feedback-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:200;
  display:none;align-items:center;justify-content:center;padding:24px;
}
.feedback-overlay.open{display:flex}
.feedback-modal{
  background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);
  padding:28px;max-width:440px;width:100%;
}
.feedback-modal h3{font-size:18px;font-weight:700;margin-bottom:4px}
.feedback-modal .fb-sub{color:var(--dim);font-size:14px;margin-bottom:20px}
.feedback-modal textarea{
  width:100%;min-height:120px;padding:12px;background:var(--bg);border:1px solid var(--border);
  border-radius:8px;color:var(--text);font-family:inherit;font-size:14px;outline:none;resize:vertical;
}
.feedback-modal textarea:focus{border-color:var(--gold-border)}
.feedback-modal .fb-contact{
  width:100%;padding:10px 12px;background:var(--bg);border:1px solid var(--border);
  border-radius:8px;color:var(--text);font-family:inherit;font-size:13px;outline:none;margin-top:10px;
}
.feedback-modal .fb-contact:focus{border-color:var(--gold-border)}
.feedback-modal .fb-actions{display:flex;gap:10px;margin-top:16px}
.fb-cancel{
  flex:1;padding:12px;border:1px solid var(--border);border-radius:8px;
  background:none;color:var(--dim);font-size:14px;cursor:pointer;font-family:inherit;
}
.fb-submit{
  flex:2;padding:12px;border:none;border-radius:8px;
  background:linear-gradient(135deg,var(--gold),#9a7a52);color:var(--bg);
  font-weight:600;font-size:14px;cursor:pointer;font-family:inherit;
}
.fb-submit:disabled{opacity:.5;cursor:not-allowed}

/* Toast */
.toast{
  position:fixed;bottom:80px;left:50%;transform:translateX(-50%);z-index:300;
  background:var(--s1);border:1px solid var(--gold-border);border-radius:10px;
  padding:12px 24px;color:var(--gold-light);font-size:14px;font-weight:500;
  box-shadow:0 4px 20px rgba(0,0,0,.5);opacity:0;transition:opacity .3s;pointer-events:none;
}
.toast.show{opacity:1}
.toast.error{border-color:var(--red);color:var(--red)}

/* Admin feedback list */
.admin-feedback{max-width:560px;margin:0 auto;padding:0 24px 32px;display:none}
.admin-feedback .fb-item{
  background:linear-gradient(135deg,var(--s1),var(--s2));border:1px solid var(--border2);
  border-radius:var(--radius-sm);padding:16px;margin-bottom:8px;
}
.admin-feedback .fb-msg{font-size:14px;line-height:1.5;margin-bottom:8px}
.admin-feedback .fb-meta{font-size:11px;color:var(--dim2);display:flex;gap:12px;flex-wrap:wrap}

/* Footer */
footer{text-align:center;padding:24px;color:#444;font-size:13px}

/* Loading skeleton */
.skeleton{background:linear-gradient(90deg,var(--s1) 25%,var(--s2) 50%,var(--s1) 75%);background-size:200%;animation:shimmer 1.5s infinite}
@keyframes shimmer{0%{background-position:200%}100%{background-position:-200%}}
.card-skeleton{height:120px;border-radius:var(--radius);margin-bottom:12px}

@media(max-width:480px){
  .alert-row{flex-direction:column}
  .modal-form{grid-template-columns:1fr}
  .hero-time{font-size:28px}
}
</style>
</head>
<body>

<!-- Auth Corner -->
<div class="auth-corner" id="auth-corner">
  <button class="btn-auth" id="btn-auth" onclick="toggleAuthModal()">üë§ Account</button>
  <div class="auth-dropdown" id="auth-dropdown">
    <div id="auth-form-view">
      <h3 id="auth-title">Sign In</h3>
      <div id="auth-name-field" style="display:none">
        <input type="text" id="auth-name" placeholder="Your name">
      </div>
      <input type="email" id="auth-email" placeholder="Email">
      <input type="password" id="auth-password" placeholder="Password">
      <button class="auth-btn" id="auth-submit-btn" onclick="submitAuth()">Sign In</button>
      <div class="auth-error" id="auth-error"></div>
      <div class="auth-toggle" id="auth-toggle" onclick="toggleAuthMode()">Don't have an account? <strong>Sign up</strong></div>
    </div>
    <div class="auth-user-view" id="auth-user-view">
      <div class="auth-user-name" id="auth-user-name"></div>
      <div class="auth-user-email" id="auth-user-email"></div>
      <div id="user-alerts-list"></div>
      <button class="auth-logout" onclick="doLogout()">Sign Out</button>
    </div>
  </div>
</div>

<!-- Header -->
<div class="header">
  <div class="header-eyebrow">Houston's Atlanta</div>
  <h1>Reservation <span>Tracker</span></h1>
  <div class="header-sub">Real-time availability for Atlanta's hardest reservation</div>
</div>

<!-- Hero: Next Available -->
<div class="hero" id="hero-card">
  <div class="hero-loading">Loading availability...</div>
</div>

<!-- Info banner -->
<div style="max-width:560px;margin:0 auto 16px;padding:0 24px">
  <div style="background:#b8956a12;border:1px solid #b8956a22;border-radius:10px;padding:14px 18px;font-size:13px;color:#aaa;line-height:1.5">
    üìã We track <strong style="color:#dfc08a">Lunch (12‚Äì1 PM)</strong> and <strong style="color:#dfc08a">Dinner (6‚Äì8 PM)</strong> ‚Äî the prime-time slots that are hardest to get. We scan availability in real time so you can see what's open at a glance.
  </div>
</div>

<!-- Scan status -->
<div class="scan-bar">
  <div class="scan-label" id="scan-status"><span class="scan-dot"></span>Scanning...</div>
</div>

<!-- Controls -->
<div class="controls">
  <div class="party-sel" id="party-sel">
    <button class="party-btn active" onclick="changeParty(2)">2</button>
    <button class="party-btn" onclick="changeParty(3)">3</button>
    <button class="party-btn" onclick="changeParty(4)">4</button>
  </div>
  <div class="loc-legend">
    <div class="loc-dot"><span class="dot pt-dot"></span> Peachtree</div>
    <div class="loc-dot"><span class="dot wp-dot"></span> West Paces</div>
  </div>
</div>

<!-- Week Tabs -->
<div class="week-tabs" id="week-tabs"></div>

<!-- Day Cards -->
<div class="cards" id="day-cards">
  <div class="card-skeleton skeleton"></div>
  <div class="card-skeleton skeleton"></div>
  <div class="card-skeleton skeleton"></div>
</div>

<!-- Alerts -->
<div class="alerts-section">
  <div class="alerts-card">
    <div class="alerts-title">üîî Get Notified</div>
    <div class="alerts-sub">We'll email you when a matching slot opens.</div>
    <div class="alert-form" id="alert-form">
      <div class="alert-row">
        <input class="alert-input" id="alert-name" placeholder="Your name">
        <input class="alert-input" id="alert-email" placeholder="you@email.com" type="email">
      </div>
      <div class="alert-row">
        <select class="alert-input" id="alert-party">
          <option value="2">2 guests</option>
          <option value="3">3 guests</option>
          <option value="4">4 guests</option>
        </select>
        <select class="alert-input" id="alert-day">
          <option value="">Any day</option>
          <option value="friday">Friday</option>
          <option value="saturday">Saturday</option>
          <option value="weekend">This weekend</option>
        </select>
      </div>
      <div class="alert-row">
        <select class="alert-input" id="alert-time">
          <option value="dinner">Dinner (5‚Äì9 PM)</option>
          <option value="lunch">Lunch (11 AM‚Äì2 PM)</option>
          <option value="">Any time</option>
        </select>
        <select class="alert-input" id="alert-location">
          <option value="both">Either location</option>
          <option value="peachtree">Peachtree only</option>
          <option value="west_paces">West Paces only</option>
        </select>
      </div>
      <button class="alert-btn" id="alert-submit" onclick="submitAlert()">üîî Notify Me</button>
    </div>
    <div class="alert-success" id="alert-success">
      <div class="check">‚úÖ</div>
      <h3>You're on the list!</h3>
      <p>We'll notify you when a matching slot opens.</p>
    </div>
    <div class="alert-count" id="alert-count"></div>
  </div>
</div>

<!-- Admin Feedback View -->
<div class="admin-feedback" id="admin-feedback">
  <h3 style="font-size:18px;font-weight:600;margin-bottom:16px">üì¨ Feedback Submissions</h3>
  <div id="admin-feedback-list"></div>
</div>

<!-- Feedback FAB -->
<button class="feedback-fab" onclick="openFeedbackModal()">üí¨ Feedback</button>

<!-- Feedback Modal -->
<div class="feedback-overlay" id="feedback-modal">
  <div class="feedback-modal">
    <h3>Send Feedback</h3>
    <div class="fb-sub">Got ideas, bugs, or love? Let us know.</div>
    <textarea id="fb-message" placeholder="What's on your mind?"></textarea>
    <input class="fb-contact" id="fb-contact" placeholder="Email or contact (optional)">
    <div class="fb-actions">
      <button class="fb-cancel" onclick="closeFeedbackModal()">Cancel</button>
      <button class="fb-submit" id="fb-submit" onclick="submitFeedback()">Send</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- Footer -->
<footer>
  <p>Built with üçü by Lee Chips</p>
  <p style="margin-top:4px">Not affiliated with Houston's Restaurant ¬∑ <span id="footer-year"></span></p>
</footer>

<!-- Booking Modal -->
<div class="modal-overlay" id="book-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Book a Table</h3>
      <div class="modal-loc" id="book-modal-loc"></div>
      <div class="modal-datetime" id="book-modal-datetime"></div>
      <div class="modal-party" id="book-modal-party"></div>
    </div>
    <div class="modal-form" id="book-form">
      <div>
        <label>First Name</label>
        <input type="text" id="book-first" placeholder="First name">
      </div>
      <div>
        <label>Last Name</label>
        <input type="text" id="book-last" placeholder="Last name">
      </div>
      <div>
        <label>Email</label>
        <input type="email" id="book-email" placeholder="you@email.com">
      </div>
      <div>
        <label>Phone</label>
        <input type="tel" id="book-phone" placeholder="(404) 555-1234">
      </div>
      <div class="modal-error" id="book-error"></div>
      <div class="modal-success" id="book-success">
        <div class="check">üéâ</div>
        <h3>Reservation Confirmed!</h3>
        <p id="book-success-msg"></p>
      </div>
      <div class="modal-actions" id="book-actions">
        <button class="modal-cancel" onclick="closeBookModal()">Cancel</button>
        <button class="modal-submit" id="book-submit-btn" onclick="submitBooking()">Book Now</button>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const LOCATIONS = {
  peachtree: {merchant_id:278258, type_id:1681, name:'Peachtree'},
  west_paces: {merchant_id:278259, type_id:1682, name:'West Paces'},
};

let scanData = null;
let scanTime = null;
let partySize = 2;
let currentWeek = 0;
let weekRanges = []; // [{start, end, label, dates}]

function buildWeekRanges(allDates){
  if(!allDates || !allDates.length) return;
  weekRanges = [];
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const today = new Date();
  today.setHours(12,0,0,0);
  const todayDow = today.getDay(); // 0=Sun
  
  // This week: today through Sunday
  const thisSunday = new Date(today);
  thisSunday.setDate(today.getDate() + (7 - todayDow) % 7);
  if(todayDow === 0) thisSunday.setDate(today.getDate()); // if today is Sunday, this week is just today
  
  // Next week: Monday after thisSunday through following Sunday
  const nextMon = new Date(thisSunday);
  nextMon.setDate(thisSunday.getDate() + 1);
  const nextSun = new Date(nextMon);
  nextSun.setDate(nextMon.getDate() + 6);
  
  // Week 3: Monday after nextSun through following Sunday
  const w3Mon = new Date(nextSun);
  w3Mon.setDate(nextSun.getDate() + 1);
  const w3Sun = new Date(w3Mon);
  w3Sun.setDate(w3Mon.getDate() + 6);
  
  const fmt = d => months[d.getMonth()] + ' ' + d.getDate();
  const ranges = [
    {start: today, end: thisSunday, label: 'This Week'},
    {start: nextMon, end: nextSun, label: fmt(nextMon) + ' ‚Äì ' + fmt(nextSun)},
    {start: w3Mon, end: w3Sun, label: fmt(w3Mon) + ' ‚Äì ' + fmt(w3Sun)}
  ];
  
  // Assign dates to each range
  for(const r of ranges){
    r.dates = allDates.filter(ds => {
      const d = new Date(ds + 'T12:00:00');
      return d >= r.start && d <= r.end;
    });
  }
  weekRanges = ranges.filter(r => r.dates.length > 0);
  
  // Render tabs
  const tabsEl = document.getElementById('week-tabs');
  tabsEl.innerHTML = weekRanges.map((r, i) => 
    `<button class="week-tab${i === 0 ? ' active' : ''}" onclick="switchWeek(${i})">${r.label}</button>`
  ).join('');
  
  if(currentWeek >= weekRanges.length) currentWeek = 0;
}
let bookingSlot = null;
let currentUser = null;
let authMode = 'login';

/* ===== HELPERS ===== */
function getDayInfo(dateStr){
  const d = new Date(dateStr+'T12:00:00');
  const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  return {
    dayName: days[d.getDay()],
    dayShort: days[d.getDay()].slice(0,3),
    date: d.getDate(),
    month: months[d.getMonth()],
    dow: d.getDay(),
    full: d
  };
}

function isToday(dateStr){
  const now = new Date();
  const d = new Date(dateStr+'T12:00:00');
  return d.toDateString() === now.toDateString();
}

function timeToMinutes(timeStr){
  // "5:00 PM" -> 1020
  const m = timeStr.match(/(\d+):(\d+)\s*(AM|PM)/i);
  if(!m) return 0;
  let h = parseInt(m[1]);
  const min = parseInt(m[2]);
  const ap = m[3].toUpperCase();
  if(ap === 'PM' && h !== 12) h += 12;
  if(ap === 'AM' && h === 12) h = 0;
  return h * 60 + min;
}

function isLunch(timeStr){ const m = timeToMinutes(timeStr); return m >= 720 && m <= 780; } // 12:00 PM ‚Äì 1:00 PM
function isDinner(timeStr){ const m = timeToMinutes(timeStr); return m >= 1080 && m <= 1200; } // 6:00 PM ‚Äì 8:00 PM

/* ===== WEEK TABS ===== */
function switchWeek(week){
  currentWeek = week;
  document.querySelectorAll('.week-tab').forEach((btn, i) => btn.classList.toggle('active', i === week));
  const container = document.getElementById('day-cards');
  container.style.opacity = '0';
  setTimeout(() => { renderDayCards(); container.style.opacity = '1'; }, 150);
}

/* ===== RENDER HERO ===== */
function renderHero(){
  const hero = document.getElementById('hero-card');
  if(!scanData || !scanData.locations){
    hero.innerHTML = '<div class="hero-loading">Loading availability...</div>';
    return;
  }

  // Find next available dinner slot
  const dates = scanData.dates || [];
  let nextSlot = null;

  for(const dateStr of dates){
    for(const locKey of ['peachtree','west_paces']){
      const loc = scanData.locations[locKey];
      if(!loc || !loc.days) continue;
      const daySlots = loc.days[dateStr];
      if(!Array.isArray(daySlots)) continue;
      for(const slot of daySlots){
        if(!slot.available || !isDinner(slot.time)) continue;
        const mins = timeToMinutes(slot.time);
        if(!nextSlot || dateStr < nextSlot.date || (dateStr === nextSlot.date && mins < timeToMinutes(nextSlot.time))){
          nextSlot = {date: dateStr, time: slot.time, loc: locKey, locName: LOCATIONS[locKey].name, reserved_ts: slot.reserved_ts, type_id: slot.type_id};
        }
      }
    }
    if(nextSlot) break; // found one on this day, stop
  }

  if(!nextSlot){
    hero.innerHTML = `
      <div class="hero-eyebrow" style="position:relative">Dinner for ${partySize}</div>
      <div class="hero-time" style="font-size:24px">No slots available</div>
      <div class="hero-detail">Check back soon ‚Äî slots open frequently</div>
    `;
    return;
  }

  const info = getDayInfo(nextSlot.date);
  const dayLabel = isToday(nextSlot.date) ? 'Tonight' : info.dayName;

  // Find alt slots on same day
  const alts = [];
  for(const locKey of ['peachtree','west_paces']){
    const daySlots = scanData.locations[locKey]?.days[nextSlot.date] || [];
    for(const s of daySlots){
      if(!s.available || !isDinner(s.time)) continue;
      if(locKey === nextSlot.loc && s.time === nextSlot.time) continue;
      alts.push({time: s.time, loc: locKey, locName: LOCATIONS[locKey].name, reserved_ts: s.reserved_ts, type_id: s.type_id});
    }
  }

  let altHtml = '';
  if(alts.length > 0){
    const shown = alts.slice(0,4);
    altHtml = `<div class="hero-alt">Also available: ${shown.map(a =>
      `<a onclick="openBookFromSlot('${nextSlot.date}','${a.time}','${a.loc}','${a.locName}',${a.reserved_ts},${a.type_id})">${a.locName} at ${a.time}</a>`
    ).join(' ¬∑ ')}</div>`;
  }

  hero.innerHTML = `
    <div class="hero-eyebrow" style="position:relative">Next Available Dinner for ${partySize}</div>
    <div class="hero-time">${dayLabel} ¬∑ ${nextSlot.time}</div>
    <div class="hero-detail">${nextSlot.locName}</div>
    <button class="hero-btn" onclick="openBookFromSlot('${nextSlot.date}','${nextSlot.time}','${nextSlot.loc}','${nextSlot.locName}',${nextSlot.reserved_ts},${nextSlot.type_id})">Book This Slot</button>
    ${altHtml}
  `;
}

/* ===== RENDER DAY CARDS ===== */
function renderDayCards(){
  const container = document.getElementById('day-cards');
  if(!scanData || !scanData.locations){
    container.innerHTML = '<div class="card-skeleton skeleton"></div>'.repeat(3);
    return;
  }

  const allDates = scanData.dates || [];
  const dates = weekRanges.length ? weekRanges[currentWeek]?.dates || [] : allDates.slice(0, 7);
  let html = '';

  for(const dateStr of dates){
    const info = getDayInfo(dateStr);
    const lunchSlots = [];
    const dinnerSlots = [];

    for(const locKey of ['peachtree','west_paces']){
      const daySlots = scanData.locations[locKey]?.days[dateStr] || [];
      if(!Array.isArray(daySlots)) continue;
      for(const slot of daySlots){
        if(!slot.available) continue;
        const entry = {time: slot.time, loc: locKey, locName: LOCATIONS[locKey].name, reserved_ts: slot.reserved_ts, type_id: slot.type_id};
        if(isLunch(slot.time)) lunchSlots.push(entry);
        else if(isDinner(slot.time)) dinnerSlots.push(entry);
      }
    }

    // Sort by time
    const sortByTime = (a,b) => timeToMinutes(a.time) - timeToMinutes(b.time) || a.loc.localeCompare(b.loc);
    lunchSlots.sort(sortByTime);
    dinnerSlots.sort(sortByTime);

    const total = lunchSlots.length + dinnerSlots.length;

    if(total === 0){
      html += `
        <div class="day-card">
          <div class="day-card-header">
            <div><span class="day-name">${info.dayName}</span><span class="day-date">${info.month} ${info.date}</span></div>
            <span class="day-badge sold-out">Sold out</span>
          </div>
          <div class="no-slots">No available slots</div>
        </div>`;
      continue;
    }

    const badgeClass = total <= 6 ? 'hot' : '';
    const badgeIcon = total <= 6 ? 'üî• ' : '';

    let sectionsHtml = '';
    if(lunchSlots.length > 0){
      sectionsHtml += `
        <div class="time-section">
          <div class="time-label">Lunch</div>
          <div class="time-pills">${lunchSlots.map(s => pillHtml(dateStr, s)).join('')}</div>
        </div>`;
    }
    if(dinnerSlots.length > 0){
      sectionsHtml += `
        <div class="time-section">
          <div class="time-label">Dinner</div>
          <div class="time-pills">${dinnerSlots.map(s => pillHtml(dateStr, s)).join('')}</div>
        </div>`;
    }
    if(lunchSlots.length === 0 && dinnerSlots.length > 0){
      sectionsHtml += '<div class="no-slots">No lunch slots available</div>';
    }
    if(dinnerSlots.length === 0 && lunchSlots.length > 0){
      sectionsHtml += '<div class="no-slots">No dinner slots available</div>';
    }

    html += `
      <div class="day-card">
        <div class="day-card-header">
          <div><span class="day-name">${info.dayName}</span><span class="day-date">${info.month} ${info.date}</span></div>
          <span class="day-badge ${badgeClass}">${badgeIcon}${total} slot${total!==1?'s':''}</span>
        </div>
        ${sectionsHtml}
      </div>`;
  }

  container.innerHTML = html;
}

function pillHtml(dateStr, s){
  const cls = s.loc === 'peachtree' ? 'pt' : 'wp';
  return `<span class="pill ${cls}" onclick="openBookFromSlot('${dateStr}','${s.time}','${s.loc}','${s.locName}',${s.reserved_ts},${s.type_id})">${s.time}</span>`;
}

/* ===== BOOKING ===== */
function openBookFromSlot(dateStr, time, locKey, locName, reserved_ts, type_id){
  const info = getDayInfo(dateStr);
  bookingSlot = {date:dateStr, time, loc:locKey, locName, reserved_ts, type_id, merchant_id: LOCATIONS[locKey].merchant_id};

  document.getElementById('book-modal-loc').textContent = locName;
  document.getElementById('book-modal-datetime').textContent = `${info.dayName}, ${info.month} ${info.date} at ${time}`;
  document.getElementById('book-modal-party').textContent = `Party of ${partySize}`;
  document.getElementById('book-error').style.display = 'none';
  document.getElementById('book-success').style.display = 'none';
  document.getElementById('book-actions').style.display = 'flex';
  document.getElementById('book-form').style.display = 'grid';

  // Pre-fill from logged-in user
  if(currentUser){
    const parts = (currentUser.name||'').split(' ');
    document.getElementById('book-first').value = parts[0]||'';
    document.getElementById('book-last').value = parts.slice(1).join(' ')||'';
    document.getElementById('book-email').value = currentUser.email||'';
  }

  document.getElementById('book-modal').classList.add('open');
}

function closeBookModal(){
  document.getElementById('book-modal').classList.remove('open');
  bookingSlot = null;
}

async function submitBooking(){
  if(!bookingSlot) return;
  const first = document.getElementById('book-first').value.trim();
  const last = document.getElementById('book-last').value.trim();
  const email = document.getElementById('book-email').value.trim();
  const phone = document.getElementById('book-phone').value.trim().replace(/\D/g,'');

  if(!first||!last){showBookError('First and last name required');return;}
  if(!email){showBookError('Email required');return;}
  if(!phone||phone.length<10){showBookError('Valid phone number required');return;}

  const btn = document.getElementById('book-submit-btn');
  btn.disabled = true; btn.textContent = 'Booking...';
  document.getElementById('book-error').style.display = 'none';

  try{
    const payload = {
      merchant_id: bookingSlot.merchant_id,
      party_size: partySize,
      reserved_ts: bookingSlot.reserved_ts,
      name: `${first} ${last}`,
      first_name: first, last_name: last,
      email, phone,
      country_code: 'US',
      reservation_type_id: bookingSlot.type_id,
      source: 'web',
      marketing_opt_in: false
    };
    const resp = await fetch('/api/book', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload)});
    const data = await resp.json();
    if(resp.ok && data.party){
      const info = getDayInfo(bookingSlot.date);
      document.getElementById('book-success-msg').textContent = `${bookingSlot.locName} ¬∑ ${bookingSlot.time} ¬∑ ${info.dayName}, ${info.month} ${info.date} ¬∑ Party of ${partySize}`;
      document.getElementById('book-form').style.display = 'none';
      document.getElementById('book-success').style.display = 'block';
      document.getElementById('book-success').parentElement.style.display = 'block';
      setTimeout(() => loadScanData(), 2000);
    } else {
      showBookError(data.message || data.error || 'Booking failed ‚Äî slot may have been taken');
      btn.disabled = false; btn.textContent = 'Book Now';
    }
  }catch(e){
    showBookError('Network error ‚Äî try again');
    btn.disabled = false; btn.textContent = 'Book Now';
  }
}

function showBookError(msg){
  const el = document.getElementById('book-error');
  el.textContent = msg; el.style.display = 'block';
}

/* ===== PARTY SIZE ===== */
function changeParty(size){
  partySize = size;
  document.querySelectorAll('.party-btn').forEach(btn => {
    btn.classList.toggle('active', parseInt(btn.textContent) === size);
  });
  // Show loading
  document.getElementById('day-cards').style.opacity = '.4';
  loadScanData();
}

/* ===== ALERTS ===== */
async function submitAlert(){
  const btn = document.getElementById('alert-submit');
  const name = document.getElementById('alert-name').value.trim();
  const email = document.getElementById('alert-email').value.trim();
  if(!name||!email){alert('Name and email required');return;}
  btn.disabled = true; btn.textContent = 'Submitting...';
  try{
    const resp = await fetch('/api/alerts', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({
      name, email,
      party_size: parseInt(document.getElementById('alert-party').value),
      preferred_date: document.getElementById('alert-day').value,
      preferred_time: document.getElementById('alert-time').value,
      location: document.getElementById('alert-location').value,
    })});
    const data = await resp.json();
    if(data.success){
      document.getElementById('alert-form').style.display = 'none';
      document.getElementById('alert-success').style.display = 'block';
      if(data.count) document.getElementById('alert-count').innerHTML = `<strong>${data.count}</strong> people are watching for slots`;
    }
  }catch(e){alert('Error signing up')}
  btn.disabled = false; btn.textContent = 'üîî Notify Me';
}

/* ===== DATA LOADING ===== */
async function loadScanData(){
  try{
    document.getElementById('scan-status').innerHTML = '<span class="scan-dot"></span>Scanning...';
    const resp = await fetch(`/api/scan?party_size=${partySize}&days=21`, {signal: AbortSignal.timeout(90000)});
    scanData = await resp.json();
    scanTime = scanData.scanned_at;
    buildWeekRanges(scanData.dates || []);
    document.getElementById('day-cards').style.opacity = '1';
    renderHero();
    renderDayCards();
    updateScanStatus();
  }catch(e){
    console.error('Scan error:', e);
    document.getElementById('day-cards').style.opacity = '1';
    document.getElementById('scan-status').innerHTML = '‚ö†Ô∏è Error loading ‚Äî <a onclick="loadScanData()" style="cursor:pointer">retry</a>';
  }
}

function updateScanStatus(){
  if(!scanTime) return;
  const ago = Math.round((Date.now() - new Date(scanTime).getTime()) / 60000);
  document.getElementById('scan-status').innerHTML = `<span class="scan-dot"></span>Live ‚Äî last scanned ${ago < 1 ? 'just now' : ago + ' min ago'}`;
}

async function loadAlertCount(){
  try{
    const resp = await fetch('/api/alerts');
    const data = await resp.json();
    if(data.count > 0) document.getElementById('alert-count').innerHTML = `<strong>${data.count}</strong> people are watching for slots`;
  }catch(e){}
}

/* ===== AUTH ===== */
function toggleAuthModal(){
  document.getElementById('auth-dropdown').classList.toggle('open');
}
function toggleAuthMode(){
  authMode = authMode === 'login' ? 'signup' : 'login';
  document.getElementById('auth-title').textContent = authMode === 'login' ? 'Sign In' : 'Create Account';
  document.getElementById('auth-submit-btn').textContent = authMode === 'login' ? 'Sign In' : 'Sign Up';
  document.getElementById('auth-name-field').style.display = authMode === 'signup' ? 'block' : 'none';
  document.getElementById('auth-toggle').innerHTML = authMode === 'login'
    ? "Don't have an account? <strong>Sign up</strong>"
    : "Already have an account? <strong>Sign in</strong>";
  document.getElementById('auth-error').style.display = 'none';
}
async function submitAuth(){
  const email = document.getElementById('auth-email').value.trim();
  const password = document.getElementById('auth-password').value;
  const errEl = document.getElementById('auth-error');
  errEl.style.display = 'none';
  const endpoint = authMode === 'login' ? '/api/auth/login' : '/api/auth/signup';
  const body = {email, password};
  if(authMode === 'signup') body.name = document.getElementById('auth-name').value.trim();
  try{
    const resp = await fetch(endpoint, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(body)});
    const data = await resp.json();
    if(data.error){errEl.textContent = data.error; errEl.style.display = 'block'; return;}
    localStorage.setItem('houstons_token', data.token);
    currentUser = data.user;
    showLoggedIn();
  }catch(e){errEl.textContent = 'Connection error'; errEl.style.display = 'block';}
}
function showLoggedIn(){
  document.getElementById('auth-form-view').style.display = 'none';
  document.getElementById('auth-user-view').style.display = 'block';
  document.getElementById('auth-user-name').textContent = currentUser.name;
  document.getElementById('auth-user-email').textContent = currentUser.email;
  document.getElementById('btn-auth').textContent = 'üë§ ' + currentUser.name.split(' ')[0];
  document.getElementById('btn-auth').classList.add('logged-in');
  document.getElementById('alert-name').value = currentUser.name;
  document.getElementById('alert-email').value = currentUser.email;
  loadUserAlerts();
}
function showLoggedOut(){
  document.getElementById('auth-form-view').style.display = 'block';
  document.getElementById('auth-user-view').style.display = 'none';
  document.getElementById('btn-auth').textContent = 'üë§ Account';
  document.getElementById('btn-auth').classList.remove('logged-in');
  document.getElementById('user-alerts-list').innerHTML = '';
  currentUser = null;
}
async function doLogout(){
  const token = localStorage.getItem('houstons_token');
  if(token){ try{await fetch('/api/auth/logout',{method:'POST',headers:{'Authorization':'Bearer '+token,'Content-Type':'application/json'}})}catch(e){} }
  localStorage.removeItem('houstons_token');
  showLoggedOut();
}
async function loadUserAlerts(){
  const token = localStorage.getItem('houstons_token');
  if(!token) return;
  try{
    const resp = await fetch('/api/auth/alerts',{headers:{'Authorization':'Bearer '+token}});
    const data = await resp.json();
    const list = document.getElementById('user-alerts-list');
    if(!data.alerts||data.alerts.length===0){list.innerHTML='<div style="text-align:center;color:var(--dim);font-size:12px;padding:12px">No alerts yet</div>';return;}
    list.innerHTML = data.alerts.map(a => `<div class="user-alert-item"><strong>${a.preferred_date||'Any date'}</strong> ¬∑ ${a.preferred_time||'Any time'} ¬∑ ${a.party_size} guests</div>`).join('');
  }catch(e){}
}
async function checkAuth(){
  const token = localStorage.getItem('houstons_token');
  if(!token) return;
  try{
    const resp = await fetch('/api/auth/me',{headers:{'Authorization':'Bearer '+token}});
    const data = await resp.json();
    if(data.user){currentUser = data.user; showLoggedIn();}
    else localStorage.removeItem('houstons_token');
  }catch(e){localStorage.removeItem('houstons_token');}
}

// Close dropdown on outside click
document.addEventListener('click', e => {
  const corner = document.getElementById('auth-corner');
  if(corner && !corner.contains(e.target)) document.getElementById('auth-dropdown').classList.remove('open');
});

/* ===== INIT ===== */
document.getElementById('footer-year').textContent = new Date().getFullYear();
checkAuth();
loadScanData();
loadAlertCount();

// Auto-refresh
setInterval(loadScanData, 5*60*1000);
setInterval(updateScanStatus, 30*1000);

/* ===== FEEDBACK ===== */
function openFeedbackModal(){
  document.getElementById('fb-message').value = '';
  document.getElementById('fb-contact').value = currentUser ? currentUser.email : '';
  document.getElementById('fb-submit').disabled = false;
  document.getElementById('fb-submit').textContent = 'Send';
  document.getElementById('feedback-modal').classList.add('open');
}
function closeFeedbackModal(){
  document.getElementById('feedback-modal').classList.remove('open');
}
async function submitFeedback(){
  const message = document.getElementById('fb-message').value.trim();
  if(!message){showToast('Please enter a message','error');return;}
  const btn = document.getElementById('fb-submit');
  btn.disabled = true; btn.textContent = 'Sending...';
  try{
    const resp = await fetch('/api/feedback',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({
      message, contact: document.getElementById('fb-contact').value.trim()
    })});
    const data = await resp.json();
    if(data.success){closeFeedbackModal();showToast('Thanks for your feedback! üôè');}
    else{showToast(data.error||'Failed to send','error');btn.disabled=false;btn.textContent='Send';}
  }catch(e){showToast('Network error','error');btn.disabled=false;btn.textContent='Send';}
}
function showToast(msg, type){
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast show' + (type==='error'?' error':'');
  setTimeout(()=>t.className='toast',3000);
}

/* ===== ADMIN FEEDBACK ===== */
async function loadAdminFeedback(){
  const token = localStorage.getItem('houstons_token');
  if(!token) return;
  try{
    const resp = await fetch('/api/admin/feedback',{headers:{'Authorization':'Bearer '+token}});
    const data = await resp.json();
    if(data.error) return;
    const section = document.getElementById('admin-feedback');
    const list = document.getElementById('admin-feedback-list');
    if(!data.feedback||data.feedback.length===0){section.style.display='none';return;}
    section.style.display = 'block';
    list.innerHTML = data.feedback.map(f => `
      <div class="fb-item">
        <div class="fb-msg">${escHtml(f.message)}</div>
        <div class="fb-meta">
          <span>üìÖ ${f.timestamp||'‚Äî'}</span>
          ${f.contact?`<span>üìß ${escHtml(f.contact)}</span>`:''}
          ${f.ip?`<span>üåê ${f.ip}</span>`:''}
        </div>
      </div>
    `).join('');
  }catch(e){}
}
function escHtml(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n/g,'<br>');}

// Load admin feedback when logged in
const _origShowLoggedIn = showLoggedIn;
showLoggedIn = function(){_origShowLoggedIn(); loadAdminFeedback();};

// Close modals on Escape
document.addEventListener('keydown', e => {if(e.key==='Escape'){closeBookModal();closeFeedbackModal();}});
document.getElementById('book-modal').addEventListener('click', e => {if(e.target===document.getElementById('book-modal')) closeBookModal()});
document.getElementById('feedback-modal').addEventListener('click', e => {if(e.target===document.getElementById('feedback-modal')) closeFeedbackModal()});
</script>
</body>
</html>
